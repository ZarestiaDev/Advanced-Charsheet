<?xml version="1.0" encoding="iso-8859-1"?>

<!-- 
  Please see the license.html file included with this distribution for 
  attribution and copyright information.
-->

<root>
	<windowclass name="charsheet_main">
		<script file="campaign/scripts/char_main.lua" />
		<sheetdata>
			<!-- Abilities -->
			<frame_char name="abilityframe">
				<bounds>15,0,220,244</bounds>
			</frame_char>

			<number_charabilityscore name="strength" source="abilities.strength.score">
				<anchored to="abilityframe" position="insidetopleft" offset="54,25" />
			</number_charabilityscore>
			<string_charabilitylabel name="strength_label">
				<anchored to="strength" />
				<static textres="str" />
			</string_charabilitylabel>
			<number_charabilitybonus name="strengthbonus" source="abilities.strength.bonus">
				<anchored to="strength" />
				<target>strength</target>
				<modifierfield>abilities.strength.bonusmodifier</modifierfield>
			</number_charabilitybonus>
			<number_charabilitydamage name="strengthdamage" source="abilities.strength.damage">
				<anchored to="strengthbonus" />
				<target>strength</target>
			</number_charabilitydamage>

			<number_charabilityscore name="dexterity" source="abilities.dexterity.score">
				<anchored to="strength" />
			</number_charabilityscore>
			<string_charabilitylabel name="dexterity_label">
				<anchored to="dexterity" />
				<static textres="dex" />
			</string_charabilitylabel>
			<number_charabilitybonus name="dexteritybonus" source="abilities.dexterity.bonus">
				<anchored to="dexterity" />
				<target>dexterity</target>
				<modifierfield>abilities.dexterity.bonusmodifier</modifierfield>
			</number_charabilitybonus>
			<number_charabilitydamage name="dexteritydamage" source="abilities.dexterity.damage">
				<anchored to="dexteritybonus" />
				<target>dexterity</target>
			</number_charabilitydamage>

			<number_charabilityscore name="constitution" source="abilities.constitution.score">
				<anchored to="dexterity" />
			</number_charabilityscore>
			<string_charabilitylabel name="constitution_label">
				<anchored to="constitution" />
				<static textres="con" />
			</string_charabilitylabel>
			<number_charabilitybonus name="constitutionbonus" source="abilities.constitution.bonus">
				<anchored to="constitution" />
				<target>constitution</target>
				<modifierfield>abilities.constitution.bonusmodifier</modifierfield>
			</number_charabilitybonus>
			<number_charabilitydamage name="constitutiondamage" source="abilities.constitution.damage">
				<anchored to="constitutionbonus" />
				<target>constitution</target>
			</number_charabilitydamage>

			<number_charabilityscore name="intelligence" source="abilities.intelligence.score">
				<anchored to="constitution" />
			</number_charabilityscore>
			<string_charabilitylabel name="intelligence_label">
				<anchored to="intelligence" />
				<static textres="int" />
			</string_charabilitylabel>
			<number_charabilitybonus name="intelligencebonus" source="abilities.intelligence.bonus">
				<anchored to="intelligence" />
				<target>intelligence</target>
				<modifierfield>abilities.intelligence.bonusmodifier</modifierfield>
			</number_charabilitybonus>
			<number_charabilitydamage name="intelligencedamage" source="abilities.intelligence.damage">
				<anchored to="intelligencebonus" />
				<target>intelligence</target>
			</number_charabilitydamage>

			<number_charabilityscore name="wisdom" source="abilities.wisdom.score">
				<anchored to="intelligence" />
			</number_charabilityscore>
			<string_charabilitylabel name="wisdom_label">
				<anchored to="wisdom" />
				<static textres="wis" />
			</string_charabilitylabel>
			<number_charabilitybonus name="wisdombonus" source="abilities.wisdom.bonus">
				<anchored to="wisdom" />
				<target>wisdom</target>
				<modifierfield>abilities.wisdom.bonusmodifier</modifierfield>
			</number_charabilitybonus>
			<number_charabilitydamage name="wisdomdamage" source="abilities.wisdom.damage">
				<anchored to="wisdombonus" />
				<target>wisdom</target>
			</number_charabilitydamage>

			<number_charabilityscore name="charisma" source="abilities.charisma.score">
				<anchored to="wisdom" />
			</number_charabilityscore>
			<string_charabilitylabel name="charisma_label">
				<anchored to="charisma" />
				<static textres="cha" />
			</string_charabilitylabel>
			<number_charabilitybonus name="charismabonus" source="abilities.charisma.bonus">
				<anchored to="charisma" />
				<target>charisma</target>
				<modifierfield>abilities.charisma.bonusmodifier</modifierfield>
			</number_charabilitybonus>
			<number_charabilitydamage name="charismadamage" source="abilities.charisma.damage">
				<anchored to="charismabonus" />
				<target>charisma</target>
			</number_charabilitydamage>

			<label_fieldtop name="abilityscore_label">
				<anchored to="strength" />
				<static textres="char_label_abilityscore" />
			</label_fieldtop>
			<label_fieldtop name="abilitymod_label">
				<anchored to="strengthbonus" />
				<static textres="char_label_abilitymod" />
			</label_fieldtop>
			<label_fieldtop name="abilitydamage_label">
				<anchored to="strengthdamage" />
				<static textres="char_label_abilitydamage" />
			</label_fieldtop>

			<!-- Health -->
			<frame_char name="hpframe">
				<bounds>236,0,-29,100</bounds>
			</frame_char>

			<genericcontrol name="leftanchor">
				<anchored to="hpframe" position="insidetopleft" width="0" height="0">
					<top offset="1" />
					<left />
				</anchored>
			</genericcontrol>

			<button_chardetails name="button_health">
				<anchored>
					<top offset="26" />
					<left parent="leftanchor" anchor="right" relation="relative" offset="10" />
				</anchored>
				<script>
					function onButtonPress()
						Interface.openWindow("charsheet_livehp", window.getDatabaseNode());
					end
				</script>
			</button_chardetails>
			<label name="hitpoints_label">
				<anchored>
					<top offset="26" />
					<left parent="leftanchor" anchor="right" relation="relative" offset="5" />
				</anchored>
				<static textres="hp" />
			</label>

			<number_dropadd name="current" source="hp.current">
				<anchored width="36" height="24">
					<top offset="24" />
					<left parent="leftanchor" anchor="right" relation="relative" offset="16" />
				</anchored>
			</number_dropadd>
			<number_dropadd name="hp" source="hp.total">
				<anchored width="36" height="24">
					<top offset="24" />
					<left parent="leftanchor" anchor="right" relation="relative" offset="20" />
				</anchored>
				<script>
					function onValueChanged()
						window.onHealthChanged();
					end
				</script>
			</number_dropadd>
			<number_dropadd name="hptemp" source="hp.temporary">
				<anchored width="36" height="24">
					<top offset="24" />
					<left parent="leftanchor" anchor="right" relation="relative" offset="20" />
				</anchored>
				<color>0000AA</color>
				<hideonvalue>0</hideonvalue>
				<script>
					function onValueChanged()
						window.onHealthChanged();
					end
				</script>
			</number_dropadd>
			<number_charwounds name="wounds" source="hp.wounds">
				<anchored width="36" height="24">
					<top offset="24" />
					<left parent="leftanchor" anchor="right" relation="relative" offset="20" />
				</anchored>
			</number_charwounds>
			<number_dropadd name="nonlethal" source="hp.nonlethal">
				<anchored width="36" height="24">
					<top offset="24" />
					<left parent="leftanchor" anchor="right" relation="relative" offset="20" />
				</anchored>
				<hideonvalue>0</hideonvalue>
				<script>
					function onValueChanged()
						window.onHealthChanged();
					end
				</script>
			</number_dropadd>

			<label_fieldtop name="nonlethal_label">
				<anchored to="nonlethal" />
				<static textres="char_hp_nonlethal_label" />
			</label_fieldtop>
			<label_fieldtop name="wounds_label">
				<anchored to="wounds" />
				<static textres="char_label_wounds" />
			</label_fieldtop>
			<label_fieldtop name="hptemp_label">
				<anchored to="hptemp" />
				<static textres="char_label_hptemp" />
			</label_fieldtop>
			<label_fieldtop name="hp_label">
				<anchored to="hp" />
				<static textres="char_hp_max_label" />
			</label_fieldtop>
			<label_fieldtop name="current_label">
				<anchored to="current" />
				<static textres="char_hp_current_label" />
			</label_fieldtop>

			<!-- Damage Reduction -->
			<string_labeled name="dr" source="defenses.damagereduction">
				<anchored to="hpframe" position="insidebottomleft" offset="15,21" width="316" height="20" />
				<labelres>char_label_dr</labelres>
			</string_labeled>

			<!-- Armor Class -->
			<frame_char name="acframe">
				<bounds>236,100,-29,72</bounds>
			</frame_char>

			<button_chardetails name="button_ac">
				<anchored to="acframe" position="insidetopleft" offset="10,28" />
				<script>
					function onButtonPress()
						Interface.openWindow("charsheet_ac_editor", window.getDatabaseNode());
					end
				</script>
			</button_chardetails>
			<label name="armorclass_label">
				<anchored to="button_ac" position="righthigh" offset="5,0" />
				<static textres="char_label_combatac" />
			</label>

			<number_chartotalac name="ac" source="ac.totals.general">
				<anchored to="armorclass_label" position="righthigh" offset="19,-2" width="36" height="24" />
			</number_chartotalac>
			<number_charflatfootedac name="flatfootedac" source="ac.totals.flatfooted">
				<anchored to="ac" position="righthigh" offset="20,0" width="36" height="24" />
			</number_charflatfootedac>
			<number_chartouchac name="touchac" source="ac.totals.touch">
				<anchored to="flatfootedac" position="righthigh" offset="20,0" width="36" height="24" />
			</number_chartouchac>
			<number_charcmd name="cmd" source="ac.totals.cmd">
				<anchored to="touchac" position="righthigh" offset="20,0" width="36" height="24" />
			</number_charcmd>

			<label_fieldtop name="ac_label">
				<anchored to="ac" />
				<static textres="ac" />
			</label_fieldtop>
			<label_fieldtop name="flatfootedac_label">
				<anchored to="flatfootedac" />
				<static textres="acff" />
			</label_fieldtop>
			<label_fieldtop name="touchac_label">
				<anchored to="touchac" />
				<static textres="actouch" />
			</label_fieldtop>
			<label_fieldtop name="label_cmd">
				<anchored to="cmd" />
				<static textres="cmd" />
			</label_fieldtop>

			<!-- Misc -->
			<frame_char name="charmiscframe">
				<bounds>236,172,-29,72</bounds>
			</frame_char>
			<button_chardetails name="button_ini">
				<anchored to="charmiscframe" position="insidetopleft" offset="10,28" />
				<script>
					function onButtonPress()
						Interface.openWindow("charsheet_misc_editor", window.getDatabaseNode());
					end
				</script>
			</button_chardetails>
			<label name="misc_label">
				<anchored to="button_ini" position="righthigh" offset="5,0" />
				<static textres="char_label_miscellaneous" />
			</label>

			<number_charinit name="initiative" source="initiative.total">
				<anchored to="misc_label" position="righthigh" offset="63,-2" width="36" height="24" />
			</number_charinit>
			<number_charsr name="spellresistance" source="defenses.sr.total">
				<anchored to="initiative" position="righthigh" offset="20,0" width="36" height="24" />
			</number_charsr>
			<basicnumber name="baseattackbonus" source="attackbonus.base">
				<anchored to="spellresistance" position="righthigh" offset="20,0" width="36" height="24" />
				<displaysign />
			</basicnumber>

			<label_fieldtop name="spellresistance_label">
				<anchored to="spellresistance" />
				<static textres="sr" />
			</label_fieldtop>
			<label_fieldtop name="initiative_label">
				<anchored to="initiative" />
				<static textres="init" />
			</label_fieldtop>
			<label_fieldtop name="baseattackbonus_label">
				<anchored to="baseattackbonus" />
				<static textres="class_label_bab_short" />
			</label_fieldtop>

			<button_chardetails name="button_char_advanced_effects">
				<anchored to="baseattackbonus" position="righthigh" offset="28,4" />
				<script>
					function onButtonPress()
						Interface.openWindow("advanced_effects_editor_custom", window.getDatabaseNode());
					end
				</script>
				<invisible />
			</button_chardetails>
			<label_fieldtop name="char_advanced_effects_label">
				<anchored to="button_char_advanced_effects" offset="0,5" />
				<static textres="char_label_advanced_effects" />
				<invisible />
			</label_fieldtop>

			<!-- Speed -->
			<frame_char name="speedframe">
				<bounds>236,244,-29,72</bounds>
			</frame_char>

			<button_chardetails name="button_speed">
				<anchored to="speedframe" position="insidetopleft" offset="10,26" />
				<script>
					function onButtonPress()
						Interface.openWindow("charsheet_speed_editor", window.getDatabaseNode());
					end
				</script>
			</button_chardetails>
			<label name="speedfinal_label">
				<anchored to="button_speed" position="righthigh" offset="5,0" />
				<static textres="char_label_speed" />
			</label>
			
			<number_charspeed name="speedfinal" source="speed.final">
				<anchored to="speedfinal_label" position="righthigh" offset="56,-2" width="36" height="24" />
			</number_charspeed>

			<string_labeled name="speedspecial" source="speed.special">
				<anchored to="speedfinal" position="righthigh" offset="10,9" width="160" height="20" />
				<labelres>char_label_speedspecial</labelres>
			</string_labeled>

			<!-- Senses -->
			<frame_char name="sensesframe">
				<bounds>236,316,-29,72</bounds>
			</frame_char>
			<genericcontrol name="anchor_charmainskill">
				<anchored to="sensesframe" position="insidetopleft" offset="0,28" width="0" height="20" />
			</genericcontrol>
			<button_charmainskill name="spot">
				<skill>skill_value_spot</skill>
			</button_charmainskill>
			<label_charmainskill name="label_spot">
				<anchored to="spot" />
				<static textres="char_label_skillspot" />
			</label_charmainskill>
			<button_charmainskill name="listen">
				<skill>skill_value_listen</skill>
			</button_charmainskill>
			<label_charmainskill name="label_listen">
				<anchored to="listen" />
				<static textres="char_label_skilllisten" />
			</label_charmainskill>
			<button_charmainskill name="search">
				<skill>skill_value_search</skill>
			</button_charmainskill>
			<label_charmainskill name="label_search">
				<anchored to="search" />
				<static textres="char_label_skillsearch" />
			</label_charmainskill>
			<button_charmainskill name="perception">
				<skill>skill_value_perception</skill>
				<invisible />
			</button_charmainskill>
			<label_charmainskill name="label_perception">
				<anchored to="perception" />
				<static textres="char_label_skillperception_short" />
				<invisible />
			</label_charmainskill>
			<string_labeled name="senses">
				<anchored to="sensesframe" height="20">
					<top offset="32" />
					<left parent="anchor_charmainskill" anchor="right" relation="relative" offset="20" />
					<right offset="-15" />
				</anchored>
				<labelres>char_label_senses</labelres>
				<delaykeyupdate />
			</string_labeled>

			<!-- Attacks -->
			<frame_char name="combatframe">
				<bounds>15,244,220,72</bounds>
			</frame_char>

			<button_chardetails name="button_attack">
				<anchored to="combatframe" position="insidetopleft" offset="10,26" />
				<script>
					function onButtonPress()
						Interface.openWindow("charsheet_attack_editor", window.getDatabaseNode());
					end
				</script>
			</button_chardetails>

			<number_charmeleetotal name="meleemainattackbonus" source="attackbonus.melee.total">
				<anchored to="button_attack" position="righthigh" offset="24,0" width="36" height="24" />
			</number_charmeleetotal>
			<number_charrangedtotal name="rangedmainattackbonus" source="attackbonus.ranged.total">
				<anchored to="meleemainattackbonus" position="righthigh" offset="20,0" width="36" height="24" />
			</number_charrangedtotal>
			<number_chargrappletotal name="grappleattackbonus" source="attackbonus.grapple.total">
				<anchored to="rangedmainattackbonus" position="righthigh" offset="20,0" width="36" height="24" />
			</number_chargrappletotal>
			
			<label_fieldtop name="melee_label">
				<anchored to="meleemainattackbonus" offset="0,2" />
				<static textres="char_label_melee" />
			</label_fieldtop>
			<label_fieldtop name="ranged_label">
				<anchored to="rangedmainattackbonus" offset="0,2" />
				<static textres="char_label_ranged_short" />
			</label_fieldtop>
			<label_fieldtop name="label_grapple">
				<anchored to="grappleattackbonus" offset="0,2" />
				<static textres="grp" />
			</label_fieldtop>

			<!-- Saves -->
			<frame_char name="saveframe">
				<bounds>15,316,220,72</bounds>
			</frame_char>

			<button_chardetails name="button_save">
				<anchored to="saveframe" position="insidetopleft" offset="10,26" />
				<script>
					function onButtonPress()
						Interface.openWindow("charsheet_save_editor", window.getDatabaseNode());
					end
				</script>
			</button_chardetails>

			<number_charsavefort name="fortitude" source="saves.fortitude.total">
				<anchored to="button_save" position="righthigh" offset="24,0" width="36" height="24" />
			</number_charsavefort>
			<number_charsaveref name="reflex" source="saves.reflex.total">
				<anchored to="fortitude" position="righthigh" offset="20,0" width="36" height="24" />
			</number_charsaveref>
			<number_charsavewill name="will" source="saves.will.total">
				<anchored to="reflex" position="righthigh" offset="20,0" width="36" height="24" />
			</number_charsavewill>

			<label_fieldtop name="fortitude_label">
				<anchored to="fortitude" />
				<static textres="fort" />
			</label_fieldtop>
			<label_fieldtop name="reflex_label">
				<anchored to="reflex" />
				<static textres="ref" />
			</label_fieldtop>
			<label_fieldtop name="will_label">
				<anchored to="will" />
				<static textres="will" />
			</label_fieldtop>
			
			<!-- Notes -->
			<frame_char name="noteframe">
				<bounds>15,388,-29,-6</bounds>
			</frame_char>
			<label name="char_notes_label">
				<anchored to="noteframe" position="insidetopleft" offset="14,15" />
				<static textres="char_label_notes" />
			</label>

			<simpleft name="notes_main">
				<anchored to="noteframe" position="insidetopleft" offset="15,40">
					<right offset="-20" />
					<bottom offset="-16" />
				</anchored>
				<frame mergerule="replace" name="fielddark" offset="7,5,7,5" hidereadonly="true" />
				<stateframe>
					<keyedit name="fieldfocus" offset="7,5,7,5" />
					<hover name="fieldfocus" offset="7,5,7,5" hidereadonly="true" />
					<drophilight name="fieldfocus" offset="7,5,7,5" hidereadonly="true" />
				</stateframe>
			</simpleft>
			<scrollbar name="notes_main_scrollbar">
				<anchored to="notes_main" />
				<target>notes_main</target>
			</scrollbar>
		</sheetdata>
	</windowclass>
	
	<windowclass name="charsheet_attack_editor">
		<frame>charsheethelper</frame>
		<placement>
			<size width="440" height="210" />
		</placement>
		<sizelimits>
            <minimum width="440" height="210" />
			<dynamic />
        </sizelimits>
		<script>
			local bInitialized = false;

			function isInitialized()
				return bInitialized;
			end

			function onInit()
				bInitialized = true;
				meleestat.onValueChanged();
				rangedstat.onValueChanged();
				grapplestat.onValueChanged();

				if DataCommon.isPFRPG() then
					label_grapple.setValue(Interface.getString("cmb"));
				else
					label_grapple.setValue(Interface.getString("grapple"));
				end
			end
		</script>
		<sheetdata>
			<windowtitlebar_char name="title">
				<prefix>char_attack_editor</prefix>
			</windowtitlebar_char>
			<anchor_title_charsheethelper name="contentanchor" />
			<!-- Attacks -->
			<frame_char name="attackframe">
				<anchored to="contentanchor" height="150">
					<top anchor="bottom" relation="relative" offset="0" />
					<left />
					<right />
				</anchored>
			</frame_char>

			<label name="baseattackbonus_label">
				<anchored to="attackframe" position="insidetopleft" offset="20,15" />
				<static textres="char_label_combatatkbase" />
			</label>
			<basicnumber name="baseattackbonus" source="attackbonus.base">
				<anchored to="attackframe" position="insidetopleft" offset="165,16" width="32" height="20" />
				<displaysign />
				<description textres="char_tooltip_combatatkbase" />
			</basicnumber>

			<number_charmeleetotal name="meleeattackbonus" source="attackbonus.melee.total">
				<anchored to="attackframe" position="insidetopleft" offset="105,56" width="32" height="20" />
			</number_charmeleetotal>
			<label name="meleeattackbonus_label">
				<anchored to="attackframe" position="insidetopleft" offset="20,56" width="80" />
				<static textres="char_label_combatatkmelee" />
			</label>
			<number_charrangedtotal name="rangedattackbonus" source="attackbonus.ranged.total">
				<anchored to="meleeattackbonus" position="belowleft" offset="0,8" width="32" height="20" />
			</number_charrangedtotal>
			<label name="rangedattackbonus_label">
				<anchored to="meleeattackbonus_label" position="belowleft" offset="0,8" width="80" />
				<static textres="char_label_combatatkranged" />
			</label>
			<number_chargrappletotal name="grappleattackbonus" source="attackbonus.grapple.total">
				<anchored to="rangedattackbonus" position="belowleft" offset="0,8" width="32" height="20" />
			</number_chargrappletotal>
			<label name="label_grapple">
				<anchored to="rangedattackbonus_label" position="belowleft" offset="0,8" width="80" />
				<static textres="grapple" />
			</label>
			<label_fieldtop name="atktotal_label">
				<anchored to="meleeattackbonus" />
				<static textres="char_label_combattotal" />
			</label_fieldtop>
			
			<number_charcombatmod_static name="meleebaseattackbonus" source="attackbonus.base">
				<anchored to="baseattackbonus" offset="0,20" />
			</number_charcombatmod_static>
			<cycler_charcombatability name="meleestat">
				<anchored to="meleebaseattackbonus" />
				<baseability>strength</baseability>
				<fieldabilitymod>meleestatmod</fieldabilitymod>
				<source><name>attackbonus.melee.ability</name></source>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="meleestatmod" source="attackbonus.melee.abilitymod">
				<anchored to="meleebaseattackbonus" offset="48,0" />
			</number_charcombatabilitymod>
			<number_charcombatmod name="meleesize" source="attackbonus.melee.size">
				<anchored to="meleestatmod" />
			</number_charcombatmod>
			<number_charcombatmod name="meleemisc" source="attackbonus.melee.misc">
				<anchored to="meleesize" />
			</number_charcombatmod>

			<number_charcombatmod_static name="rangedbaseattackbonus" source="attackbonus.base">
				<anchored to="meleebaseattackbonus" />
			</number_charcombatmod_static>
			<cycler_charcombatability name="rangedstat">
				<anchored to="rangedbaseattackbonus" />
				<baseability>dexterity</baseability>
				<fieldabilitymod>rangedstatmod</fieldabilitymod>
				<source><name>attackbonus.ranged.ability</name></source>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="rangedstatmod" source="attackbonus.ranged.abilitymod">
				<anchored to="rangedbaseattackbonus" offset="48,0" />
			</number_charcombatabilitymod>
			<number_charcombatmod name="rangedsize" source="attackbonus.ranged.size">
				<anchored to="rangedstatmod" />
			</number_charcombatmod>
			<number_charcombatmod name="rangedmisc" source="attackbonus.ranged.misc">
				<anchored to="rangedsize" />
			</number_charcombatmod>

			<number_charcombatmod_static name="grapplebaseattackbonus" source="attackbonus.base">
				<anchored to="rangedbaseattackbonus" />
			</number_charcombatmod_static>
			<cycler_charcombatability name="grapplestat">
				<anchored to="grapplebaseattackbonus" />
				<baseability>strength</baseability>
				<fieldabilitymod>grapplestatmod</fieldabilitymod>
				<source><name>attackbonus.grapple.ability</name></source>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="grapplestatmod" source="attackbonus.grapple.abilitymod">
				<anchored to="grapplebaseattackbonus" offset="48,0" />
			</number_charcombatabilitymod>
			<number_charcombatmod name="grapplesize" source="attackbonus.grapple.size">
				<anchored to="grapplestatmod" />
			</number_charcombatmod>
			<number_charcombatmod name="grapplemisc" source="attackbonus.grapple.misc">
				<anchored to="grapplesize" />
			</number_charcombatmod>

			<label_fieldtop name="atkstatmod_label">
				<anchored to="meleestat" />
				<static textres="char_label_combatability" />
			</label_fieldtop>
			<label_fieldtop name="atksize_label">
				<anchored to="meleesize" />
				<static textres="char_label_combatsize" />
			</label_fieldtop>
			<label_fieldtop name="atkmisc_label">
				<anchored to="meleemisc" />
				<static textres="char_label_combatmisc" />
			</label_fieldtop>
			
			<close_charsheethelper />
			<resize_charsheethelper />
		</sheetdata>
	</windowclass>
	
	<windowclass name="charsheet_speed_editor">
		<frame>charsheethelper</frame>
		<placement>
			<size width="290" height="160" />
		</placement>
		<sizelimits>
			<minimum width="290" height="160" />
			<dynamic />
		</sizelimits>
		<script>
			local bInitialized = false;

			function isInitialized()
				return bInitialized;
			end

			function onInit()
				bInitialized = true;
			end
		</script>
		<sheetdata>
			<windowtitlebar_char name="title">
				<prefix>char_label_speed</prefix>
			</windowtitlebar_char>
			<anchor_title_charsheethelper name="contentanchor" />
			<!-- Speed -->
			<frame_char name="speedframe">
				<anchored to="contentanchor" height="90">
					<top anchor="bottom" relation="relative" offset="0" />
					<left />
					<right />
				</anchored>
			</frame_char>
			
			<number_charspeed name="speedfinal" source="speed.total">
				<anchored to="speedframe" position="insidetopleft" offset="88,16" width="32" height="20" />
			</number_charspeed>
			<label name="speedfinal_label">
				<anchored>
					<left parent="speedframe" offset="18" />
					<top parent="speedfinal" />
				</anchored>
				<static textres="char_label_combatspeed" />
			</label>
			<basicnumber name="speedbase" source="speed.base">
				<anchored to="speedframe" position="insidetopleft" offset="22,54" width="30" height="20" />
				<hideonvalue>0</hideonvalue>
			</basicnumber>
			<label_fieldtop name="speedbase_label">
				<anchored to="speedbase" />
				<static textres="char_label_combatbase" />
			</label_fieldtop>
			<basicnumber name="speedarmor" source="speed.armor">
				<anchored to="speedbase" position="right" offset="10,0" width="30" />
				<hideonvalue>0</hideonvalue>
			</basicnumber>
			<label_fieldtop name="speedarmor_label">
				<anchored to="speedarmor" />
				<static textres="char_label_combatarmor" />
			</label_fieldtop>
			<basicnumber name="speedmisc" source="speed.misc">
				<anchored to="speedarmor" position="right" offset="10,0" width="30" />
				<hideonvalue>0</hideonvalue>
			</basicnumber>
			<label_fieldtop name="speedmisc_label">
				<anchored to="speedmisc" />
				<static textres="char_label_combatmisc" />
			</label_fieldtop>
			<close_charsheethelper />
			<resize_charsheethelper />
		</sheetdata>
	</windowclass>
	
	<windowclass name="charsheet_save_editor">
		<frame>charsheethelper</frame>
		<placement>
			<size width="425" height="190" />
		</placement>
		<sizelimits>
			<minimum width="425" height="190" />
			<dynamic />
		</sizelimits>
		<script>
			local bInitialized = false;

			function isInitialized()
				return bInitialized;
			end

			function onInit()
				bInitialized = true;
				fortitudestat.onValueChanged();
				reflexstat.onValueChanged();
				willstat.onValueChanged();
			end
		</script>
		<sheetdata>
			<windowtitlebar_char name="title">
				<prefix>savingthrow</prefix>
			</windowtitlebar_char>
			<anchor_title_charsheethelper name="contentanchor" />
			<!-- Defenses - Saves -->
			<frame_char name="saveframe">
				<anchored to="contentanchor" height="120">
					<top anchor="bottom" relation="relative" offset="0" />
					<left />
					<right />
				</anchored>
			</frame_char>

			<number_charsavefort name="fortitude" source="saves.fortitude.total">
				<anchored to="saveframe" position="insidetopleft" offset="105,28" width="32" height="20" />
			</number_charsavefort>
			<label name="fortitude_label">
				<anchored to="saveframe" position="insidetopleft" offset="20,28" width="80" />
				<static textres="fortitude" />
			</label>
			<number_charsaveref name="reflex" source="saves.reflex.total">
				<anchored to="fortitude" position="belowleft" offset="0,8" width="32" height="20" />
			</number_charsaveref>
			<label name="reflex_label">
				<anchored to="fortitude_label" position="belowleft" offset="0,8" width="80" />
				<static textres="reflex" />
			</label>
			<number_charsavewill name="will" source="saves.will.total">
				<anchored to="reflex" position="belowleft" offset="0,8" width="32" height="20" />
			</number_charsavewill>
			<label name="will_label">
				<anchored to="reflex_label" position="belowleft" offset="0,8" width="80" />
				<static textres="will_long" />
			</label>
			<label_fieldtop name="savettotal_label">
				<anchored to="fortitude" />
				<static textres="char_label_combattotal" />
			</label_fieldtop>

			<number_charcombatmod name="fortitudebase" source="saves.fortitude.base">
				<anchored to="fortitude" offset="15,0" />
			</number_charcombatmod>
			<cycler_charcombatability name="fortitudestat">
				<anchored to="fortitudebase" />
				<baseability>constitution</baseability>
				<fieldabilitymod>fortitudestatmod</fieldabilitymod>
				<source><name>saves.fortitude.ability</name></source>
			</cycler_charcombatability>
			<cycler_ability name="fortitudestat2">
				<anchored to="fortitudebase" position="aboveright" offset="-112,-20" height="20" width="32" />
				<fieldabilitymod>fortitudestatmod2</fieldabilitymod>
				<source><name>saves.fortitude.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
				<script>
					function onValueChanged()
						if window.isInitialized() then
							local sValue = getStringValue();
							if sValue == "" and baseability then
								sValue = baseability[1];
							end
							
							local sCharRelative = "";
							if abilityrelative then
								sCharRelative = abilityrelative[1];
							end
							
							if fieldabilitymod and window[fieldabilitymod[1]] then
								window[fieldabilitymod[1]].updateAbility(sCharRelative, sValue);
							end
						end
					end
				</script>
			</cycler_ability>
			<number_charcombatabilitymod name="fortitudestatmod" source="saves.fortitude.abilitymod">
				<anchored to="fortitudebase" offset="48,0" />
			</number_charcombatabilitymod>
			<number_charcombatabilitymod name="fortitudestatmod2" source="saves.fortitude.abilitymod2">
				<anchored to="fortitudebase" offset="115,0" />
			</number_charcombatabilitymod>
			<number_charcombatmod name="fortitudemisc" source="saves.fortitude.misc">
				<anchored to="fortitudestatmod" offset="70" />
				<script>
					function onInit()
						local nodeAbil = getDatabaseNode().getParent()
						local nMisc2 = DB.getValue(nodeAbil, 'misc2')
						if nMisc2 then
							if nMisc2 ~= 0 then setValue(nMisc2) end
							DB.deleteChild(nodeAbil, 'misc2')
						end
					end
				</script>
			</number_charcombatmod>

			<number_charcombatmod name="reflexbase" source="saves.reflex.base">
				<anchored to="reflex" offset="15,0" />
			</number_charcombatmod>
			<cycler_charcombatability name="reflexstat">
				<anchored to="reflexbase" />
				<baseability>dexterity</baseability>
				<fieldabilitymod>reflexstatmod</fieldabilitymod>
				<source><name>saves.reflex.ability</name></source>
			</cycler_charcombatability>
			<cycler_ability name="reflexstat2">
				<anchored to="reflexbase" position="aboveright" offset="-112,-20" height="20" width="32" />
				<fieldabilitymod>reflexstatmod2</fieldabilitymod>
				<source><name>saves.reflex.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
				<script>
					function onValueChanged()
						if window.isInitialized() then
							local sValue = getStringValue();
							if sValue == "" and baseability then
								sValue = baseability[1];
							end
							
							local sCharRelative = "";
							if abilityrelative then
								sCharRelative = abilityrelative[1];
							end
							
							if fieldabilitymod and window[fieldabilitymod[1]] then
								window[fieldabilitymod[1]].updateAbility(sCharRelative, sValue);
							end
						end
					end
				</script>
			</cycler_ability>
			<number_charcombatabilitymod name="reflexstatmod" source="saves.reflex.abilitymod">
				<anchored to="reflexbase" offset="48,0" />
			</number_charcombatabilitymod>
			<number_charcombatabilitymod name="reflexstatmod2" source="saves.reflex.abilitymod2">
				<anchored to="reflexbase" offset="115,0" />
			</number_charcombatabilitymod>
			<number_charcombatmod name="reflexmisc" source="saves.reflex.misc">
				<anchored to="reflexstatmod" offset="70" />
				<script>
					function onInit()
						local nodeAbil = getDatabaseNode().getParent()
						local nMisc2 = DB.getValue(nodeAbil, 'misc2')
						if nMisc2 then
							if nMisc2 ~= 0 then setValue(nMisc2) end
							DB.deleteChild(nodeAbil, 'misc2')
						end
					end
				</script>
			</number_charcombatmod>

			<number_charcombatmod name="willbase" source="saves.will.base">
				<anchored to="will" offset="15,0" />
			</number_charcombatmod>
			<cycler_charcombatability name="willstat">
				<anchored to="willbase" />
				<baseability>wisdom</baseability>
				<fieldabilitymod>willstatmod</fieldabilitymod>
				<source><name>saves.will.ability</name></source>
			</cycler_charcombatability>
			<cycler_ability name="willstat2">
				<anchored to="willbase" position="aboveright" offset="-112,-20" height="20" width="32" />
				<fieldabilitymod>willstatmod2</fieldabilitymod>
				<source><name>saves.will.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
				<script>
					function onValueChanged()
						if window.isInitialized() then
							local sValue = getStringValue();
							if sValue == "" and baseability then
								sValue = baseability[1];
							end
							
							local sCharRelative = "";
							if abilityrelative then
								sCharRelative = abilityrelative[1];
							end
							
							if fieldabilitymod and window[fieldabilitymod[1]] then
								window[fieldabilitymod[1]].updateAbility(sCharRelative, sValue);
							end
						end
					end
				</script>
			</cycler_ability>
			<number_charcombatabilitymod name="willstatmod" source="saves.will.abilitymod">
				<anchored to="willbase" offset="48,0" />
			</number_charcombatabilitymod>
			<number_charcombatabilitymod name="willstatmod2" source="saves.will.abilitymod2">
				<anchored to="willbase" offset="115,0" />
			</number_charcombatabilitymod>
			<number_charcombatmod name="willmisc" source="saves.will.misc">
				<anchored to="willstatmod" offset="70" />
				<script>
					function onInit()
						local nodeAbil = getDatabaseNode().getParent()
						local nMisc2 = DB.getValue(nodeAbil, 'misc2')
						if nMisc2 then
							if nMisc2 ~= 0 then setValue(nMisc2) end
							DB.deleteChild(nodeAbil, 'misc2')
						end
					end
				</script>
			</number_charcombatmod>

			<label_fieldtop name="savebase_label">
				<anchored to="fortitudebase" />
				<static textres="char_label_combatsaveclass" />
			</label_fieldtop>
			<label_fieldtop name="savestatmod_label">
				<anchored to="fortitudestat" />
				<static textres="char_label_combatability" />
			</label_fieldtop>
			<label_fieldtop name="savestatmod2_label">
				<anchored to="fortitudestat2" />
				<static textres="char_label_combatability2" />
			</label_fieldtop>
			<label_fieldtop name="savemisc_label">
				<anchored to="fortitudemisc" />
				<static textres="char_label_combatmisc" />
			</label_fieldtop>
			
			<close_charsheethelper />
			<resize_charsheethelper />
		</sheetdata>
	</windowclass>
	
	<windowclass name="charsheet_ac_editor">
		<frame>charsheethelper</frame>
		<sizelimits>
			<minimum width="620" height="270" />
			<dynamic />
		</sizelimits> 
		<script>
			local bInitialized = false;

			function isInitialized()
				return bInitialized;
			end

			function onInit()
				bInitialized = true;
				
				acstat.onValueChanged();
				acstat2.onValueChanged();
				cmdbase.onValueChanged();
				cmdstat.onValueChanged();

				onSystemChanged();
			end

			function onSystemChanged()
				local bPFMode = DataCommon.isPFRPG();
				
				line_cmd.setVisible(bPFMode);
				
				cmd.setVisible(bPFMode);
				label_cmd.setVisible(bPFMode);
				cmdacarmor.setVisible(bPFMode);
				cmdacshield.setVisible(bPFMode);
				cmdacstatmod.setVisible(bPFMode);
				cmdacsize.setVisible(bPFMode);
				cmdacnatural.setVisible(bPFMode);
				cmdacdeflection.setVisible(bPFMode);
				cmdacdodge.setVisible(bPFMode);
				cmdmisc.setVisible(bPFMode);
				
				cmdstat.setVisible(bPFMode);
				cmdstatmod.setVisible(bPFMode);
				cmdbase.setVisible(bPFMode);
				cmdbasemod.setVisible(bPFMode);

				if bPFMode then
					acframe.setAnchoredHeight("210");
				else
					acframe.setAnchoredHeight("140");
				end
			end
		</script>
		<sheetdata>
			<windowtitlebar_char name="title">
				<prefix>char_label_combatac</prefix>
			</windowtitlebar_char>
			<anchor_title_charsheethelper name="contentanchor" />
			<!-- Defenses - Armor -->
			<frame_char name="acframe">
				<anchored to="contentanchor" height="140" width="590">
					<top anchor="bottom" relation="relative" offset="0" />
					<left />
				</anchored>
			</frame_char>

			<number_chartotalac name="ac" source="ac.totals.general">
				<anchored to="acframe" position="insidetopleft" offset="115,28" width="32" height="20" />
			</number_chartotalac>
			<label name="ac_label">
				<anchored to="acframe" position="insidetopleft" offset="20,28" width="82" />
				<static textres="char_label_combatac" />
			</label>
			<number_charflatfootedac name="flatfootedac" source="ac.totals.flatfooted">
				<anchored to="ac" position="belowleft" offset="0,28" width="32" height="20" />
			</number_charflatfootedac>
			<label name="flatfootedac_label">
				<anchored to="ac_label" position="belowleft" offset="0,28" width="80" />
				<static textres="armorclassff" />
			</label>
			<number_chartouchac name="touchac" source="ac.totals.touch">
				<anchored to="flatfootedac" position="belowleft" offset="0,8" width="32" height="20" />
			</number_chartouchac>
			<label name="touchac_label">
				<anchored to="flatfootedac_label" position="belowleft" offset="0,8" width="80" />
				<static textres="armorclasstouch" />
			</label>
			<genericcontrol name="line_cmd">
				<anchored height="3">
					<top parent="touchac" anchor="bottom" offset="8" />
					<left parent="acframe" offset="20" />
					<right parent="acframe" offset="-20" />
				</anchored>
				<frame name="separatorline" />
				<disabled />
			</genericcontrol>
			<number_charcmd name="cmd" source="ac.totals.cmd">
				<anchored to="touchac" position="belowleft" offset="0,20" width="32" height="20" />
			</number_charcmd>
			<label name="label_cmd">
				<anchored to="touchac_label" position="belowleft" offset="0,20" width="80" />
				<static textres="cmd" />
			</label>
			<label_fieldtop name="actotal_label">
				<anchored to="ac" />
				<static textres="char_label_combattotal" />
			</label_fieldtop>

			<number_charcombatmod name="acarmor" source="ac.sources.armor">
				<anchored to="ac" offset="15,0" />
			</number_charcombatmod>
			<number_charcombatmod_static name="ffacarmor" source="ac.sources.armor">
				<anchored to="acarmor" offset="0,28" />
			</number_charcombatmod_static>
			<string_charcombatmod_blank name="touchacarmor">
				<anchored to="ffacarmor" />
			</string_charcombatmod_blank>
			<string_charcombatmod_blank name="cmdacarmor">
				<anchored to="touchacarmor" offset="0,20" />
			</string_charcombatmod_blank>
			<label_fieldtop name="acarmor_label">
				<anchored to="acarmor" />
				<static textres="char_label_combatarmor" />
			</label_fieldtop>
			
			<number_charcombatmod name="acshield" source="ac.sources.shield">
				<anchored to="acarmor" />
			</number_charcombatmod>
			<number_charcombatmod_static name="ffacshield" source="ac.sources.shield">
				<anchored to="acshield" offset="0,28" />
			</number_charcombatmod_static>
			<string_charcombatmod_blank name="touchacshield">
				<anchored to="ffacshield" />
			</string_charcombatmod_blank>
			<string_charcombatmod_blank name="cmdacshield">
				<anchored to="touchacshield" offset="0,20" />
			</string_charcombatmod_blank>
			<label_fieldtop name="acshield_label">
				<anchored to="acshield" />
				<static textres="char_label_combatacshield" />
			</label_fieldtop>
			
			<cycler_charcombatability name="acstat">
				<anchored to="acshield" />
				<baseability>dexterity</baseability>
				<fieldabilitymod>acstatmod</fieldabilitymod>
				<source><name>ac.sources.ability</name></source>
			</cycler_charcombatability>
			<cycler_charcombatability name="acstat2">
				<anchored to="acstat" position="belowleft" offset="0,8" />
				<fieldabilitymod>acstatmod2</fieldabilitymod>
				<source><name>ac.sources.ability2</name></source>
				<parameters><defaultlabelres>-</defaultlabelres></parameters>
			</cycler_charcombatability>
			<cycler_charcombatability name="cmdstat">
				<anchored to="acstat" position="belowleft" offset="0,125" />
				<baseability>strength</baseability>
				<fieldabilitymod>cmdstatmod</fieldabilitymod>
				<source><name>ac.sources.cmdability</name></source>
				<tooltip textres="char_tooltip_cmdability2" />
			</cycler_charcombatability>
			<cycler_charcombatability name="cmdbase">
				<anchored to="acarmor" position="belowleft" offset="0,125" />
				<baseability>bab</baseability>
				<fieldabilitymod>cmdbasemod</fieldabilitymod>
				<source><name>ac.sources.cmdbase</name></source>
				<parameters>
					<defaultlabelres>bab</defaultlabelres>
					<labelsres>lvl</labelsres>
					<values>level</values>
				</parameters>
				<tooltip textres="char_tooltip_cmdbasemod" />
			</cycler_charcombatability>

			<number_charcombatabilitymod name="acstatmod" source="ac.sources.abilitymod">
				<anchored to="acshield" offset="44,0" />
			</number_charcombatabilitymod>
			<number_charcombatabilitymod name="acstatmod2" source="ac.sources.abilitymod2">
				<anchored to="acstatmod" position="belowleft" offset="0,6" height="20" />
			</number_charcombatabilitymod>
			<string_charcombatmod_blank name="ffacstatmod">
				<anchored to="acstatmod" offset="0,31" />
			</string_charcombatmod_blank>
			<number_charcombatabilitymod_static name="touchacstatmod">
				<anchored to="ffacstatmod" />
				<source><name>encumbrance.armormaxstatbonus</name></source>
				<source><name>encumbrance.armormaxstatbonusactive</name></source>
				<script>
					function onSourceUpdate()
						local nMaxMod = -1;
						local bMaxActive = sources["encumbrance.armormaxstatbonusactive"].getValue();
						if bMaxActive &gt; 0 then
							nMaxMod = sources["encumbrance.armormaxstatbonus"].getValue();
						end

						local nAbility = getAbilityBonus(nMaxMod);

						setValue(calculateSources() + nAbility);
					end
				</script>
			</number_charcombatabilitymod_static>
			<number_charcombatabilitymod_static name="cmdacstatmod">
				<anchored to="touchacstatmod" offset="0,20" />
			</number_charcombatabilitymod_static>
			<number_charcombatabilitymod name="cmdstatmod" source="ac.sources.cmdabilitymod">
				<anchored to="acstatmod" position="belowleft" offset="0,122" height="20" />
			</number_charcombatabilitymod>
			<number_charcombatabilitymod name="cmdbasemod" source="ac.sources.cmdbasemod">
				<anchored to="acshield" position="belowleft" offset="0,122" height="20" />
			</number_charcombatabilitymod>
			<label_fieldtop name="acstatmod_label">
				<anchored to="acstat" />
				<static textres="char_label_combatability" />
			</label_fieldtop>
			
			<number_charcombatmod name="acsize" source="ac.sources.size">
				<anchored to="acstatmod" />
			</number_charcombatmod>
			<number_charcombatmod_static name="ffacsize" source="ac.sources.size">
				<anchored to="acsize" offset="0,28" />
			</number_charcombatmod_static>
			<number_charcombatmod_static name="touchacsize" source="ac.sources.size">
				<anchored to="ffacsize" />
			</number_charcombatmod_static>
			<numberc_linked name="cmdacsize">
				<anchored to="touchacsize" position="below" offset="0,20" height="20" />
				<displaysign />
				<nodrag />
				<source><name>ac.sources.size</name><op>-</op></source>
			</numberc_linked>
			<label_fieldtop name="acsize_label">
				<anchored to="acsize" />
				<static textres="char_label_combatsize" />
			</label_fieldtop>

			<number_charcombatmod name="acnatural" source="ac.sources.naturalarmor">
				<anchored to="acsize" />
			</number_charcombatmod>
			<number_charcombatmod_static name="ffacnatural" source="ac.sources.naturalarmor">
				<anchored to="acnatural" offset="0,28" />
			</number_charcombatmod_static>
			<string_charcombatmod_blank name="touchacnatural">
				<anchored to="ffacnatural" />
			</string_charcombatmod_blank>
			<string_charcombatmod_blank name="cmdacnatural">
				<anchored to="touchacnatural" offset="0,20" />
			</string_charcombatmod_blank>
			<label_fieldtop name="acnatural_label">
				<anchored to="acnatural" />
				<static textres="char_label_combatacnatural" />
			</label_fieldtop>

			<number_charcombatmod name="acdeflection" source="ac.sources.deflection">
				<anchored to="acnatural" />
			</number_charcombatmod>
			<number_charcombatmod_static name="ffacdeflection" source="ac.sources.deflection">
				<anchored to="acdeflection" offset="0,28" />
			</number_charcombatmod_static>
			<number_charcombatmod_static name="touchacdeflection" source="ac.sources.deflection">
				<anchored to="ffacdeflection" />
			</number_charcombatmod_static>
			<number_charcombatmod_static name="cmdacdeflection" source="ac.sources.deflection">
				<anchored to="touchacdeflection" offset="0,20" />
			</number_charcombatmod_static>
			<label_fieldtop name="acdeflection_label">
				<anchored to="acdeflection" />
				<static textres="char_label_combatacdeflection" />
			</label_fieldtop>

			<number_charcombatmod name="acdodge" source="ac.sources.dodge">
				<anchored to="acdeflection" />
			</number_charcombatmod>
			<string_charcombatmod_blank name="ffacdodge">
				<anchored to="acdodge" offset="0,28" />
			</string_charcombatmod_blank>
			<number_charcombatmod_static name="touchacdodge" source="ac.sources.dodge">
				<anchored to="ffacdodge" />
			</number_charcombatmod_static>
			<number_charcombatmod_static name="cmdacdodge" source="ac.sources.dodge">
				<anchored to="touchacdodge" offset="0,20" />
			</number_charcombatmod_static>
			<label_fieldtop name="acdodge_label">
				<anchored to="acdodge" />
				<static textres="char_label_combatacdodge" />
			</label_fieldtop>

			<number_charcombatmod name="acmisc" source="ac.sources.misc">
				<anchored to="acdodge" />
			</number_charcombatmod>
			<basicnumber name="ffacmisc" source="ac.sources.ffmisc">
				<anchored to="acmisc" position="below" offset="0,28" height="20" />
				<displaysign />
			</basicnumber>
			<basicnumber name="touchacmisc" source="ac.sources.touchmisc">
				<anchored to="ffacmisc" position="below" offset="0,8" height="20" />
				<displaysign />
			</basicnumber>
			<basicnumber name="cmdmisc" source="ac.sources.cmdmisc">
				<anchored to="touchacmisc" position="below" offset="0,20" height="20" />
				<displaysign />
			</basicnumber>
			<label_fieldtop name="acmisc_label">
				<anchored to="acmisc" />
				<static textres="char_label_combatmisc" />
			</label_fieldtop>

			<close_charsheethelper />
			<resize_charsheethelper />
		</sheetdata>
	</windowclass>
	
	<windowclass name="charsheet_misc_editor">
		<frame>charsheethelper</frame>
		<placement>
			<size width="250" height="215" />
		</placement>
		<sizelimits>
			<minimum width="250" height="215" />
			<dynamic />
		</sizelimits>
		<script>
			local bInitialized = false;

			function isInitialized()
				return bInitialized;
			end

			function onInit()
				bInitialized = true;
				initiativestat.onValueChanged();
			end
		</script>
		<sheetdata>
			<windowtitlebar_char name="title">
				<prefix>initiative</prefix>
			</windowtitlebar_char>
			<anchor_title_charsheethelper name="contentanchor" />
			<!-- INITIATIVE -->
			<frame_char name="initiativeframe">
				<anchored to="contentanchor" height="90">
					<top anchor="bottom" relation="relative" offset="0" />
					<left />
					<right />
				</anchored>
			</frame_char>
			<number_charinit name="initiative" source="initiative.total">
				<anchored to="initiativeframe" position="insidetopleft" offset="94,16" width="32" height="20" />
			</number_charinit>
			<label name="initiative_label">
				<anchored>
					<left parent="initiativeframe" offset="15" />
					<top parent="initiative" />
				</anchored>
				<static textres="initiative" />
			</label>
			<cycler_charcombatability name="initiativestat">
				<anchored to="initiativeframe" position="insidetopleft" offset="18,54" />
				<baseability>dexterity</baseability>
				<fieldabilitymod>initiativestatmod</fieldabilitymod>
				<source><name>initiative.ability</name></source>
			</cycler_charcombatability>
			<number_charcombatabilitymod name="initiativestatmod" source="initiative.abilitymod">
				<anchored to="initiativeframe" position="insidetopleft" offset="58,54" width="30" height="20" />
				<hideonvalue>0</hideonvalue>
				<displaysign />
			</number_charcombatabilitymod>
			<label_fieldtop name="initiativestatmod_label">
				<anchored to="initiativestat" />
				<static textres="char_label_combatability" />
			</label_fieldtop>
			<basicnumber name="initiativemiscbonus" source="initiative.misc">
				<anchored to="initiativestatmod" position="right" offset="8,0" width="30" />
				<hideonvalue>0</hideonvalue>
				<displaysign />
			</basicnumber>
			<label_fieldtop name="initiativemiscbonus_label">
				<anchored to="initiativemiscbonus" />
				<static textres="char_label_combatmisc" />
			</label_fieldtop>

			<!-- Defenses - Spell -->
			<frame_char name="srframe">
				<anchored to="contentanchor" height="65">
					<top anchor="bottom" relation="relative" offset="0" />
					<left />
					<right />
				</anchored>
			</frame_char>
			
			<number_charsr name="srfinal" source="defenses.sr.total">
				<anchored to="srframe" position="insidetopleft" offset="47,26" width="32" height="20" />
				<hideonvalue>0</hideonvalue>
			</number_charsr>
			<label name="srfinal_label">
				<anchored to="srframe" position="insidetopleft" offset="20,26" width="30" />
				<static textres="sr" />
			</label>
			<label_fieldtop name="srtotal_label">
				<anchored to="srfinal" />
				<static textres="char_label_combattotal" />
			</label_fieldtop>
			<basicnumber name="srbase" source="defenses.sr.base">
				<anchored to="srfinal" position="right" offset="15,0" width="34"/>
				<hideonvalue>0</hideonvalue>
			</basicnumber>
			<label_fieldtop name="srbase_label">
				<anchored to="srbase" />
				<static textres="char_label_combatbase" />
			</label_fieldtop>
			<basicnumber name="srmisc" source="defenses.sr.misc">
				<anchored to="srbase" position="right" offset="12,0" width="34" />
				<hideonvalue>0</hideonvalue>
			</basicnumber>
			<label_fieldtop name="srmisc_label">
				<anchored to="srmisc" />
				<static textres="char_label_combatmisc" />
			</label_fieldtop>

			<close_charsheethelper />
			<resize_charsheethelper />
		</sheetdata>
	</windowclass>
	
	<windowclass name="charsheet_classes" merge="join">
		<sheetdata>
			<label name="classskillranksused_label">
				<anchored to="labelanchor" width="33">
					<top />
					<right anchor="left" relation="relative" offset="-9" />
				</anchored>
			</label>
			<label name="classskillrankstotal_label">
				<anchored to="labelanchor" width="33">
					<top />
					<right anchor="left" relation="relative" offset="-7" />
				</anchored>
			</label>
			<label name="classlevel_label">
				<anchored to="labelanchor" width="34">
					<top />
					<right anchor="left" relation="relative" offset="-7" />
				</anchored>
			</label>
		</sheetdata>
	</windowclass>
</root>
